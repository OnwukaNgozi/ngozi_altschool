# This repo contains the solution to the following tasks


# Automate the provisioning of two Ubuntu-based servers, named “Master” and “Slave”, using Vagrant.
# On the Master node, create a bash script to automate the deployment of a LAMP (Linux, Apache, MySQL, PHP) stack.
# This script should clone a PHP application from GitHub, install all necessary packages, and configure Apache web server and MySQL. 
# Ensure the bash script is reusable and readable.
# Using an Ansible playbook:
# Execute the bash script on the Slave node and verify that the PHP application is accessible through the VM’s IP address (take screenshot of this as evidence)
# Create a cron job to check the server’s uptime every 12 am.
# Use either the VM’s IP address or a domain name as the URL.

First run vagrant init ubuntu/focal64 to initialize vagrant in your gitbash, then edit the Vagrantfile and provision the master and slave VM, the slave having an IP address generated by you, then save.

![Screenshot 1](/Vagrantfile.png)

Then run vagrant up master, then vagrant ssh master to spin up the master VM and cd into the root.

Running the script, LAMP_stack.sh, on your master VM to make sure it's working, you will get an end result like this.

![Screenshot 2](/database%20created.png)

Then create a keypair for easy access into the nodes using ssh-keygen, and copy the id_rsa.pub keys interchangeably into each other. Paste these keys in the authourised_keys file respectively.

Install ansible using
apt install -y software-properties-common python-apt
apt install -y ansible
cd into /.ansible
create a file, host-inventory, and paste the ip address of your slave machine
Then create your ansible playbook (a filename with .yml extension)
To check is your master-slave connection is successful, run
ansible all -i host-inventory -m ping

![Screenshot 3](/connection%20established.png)

Then run your playbook using, mine is lamp-stack.yml
ansible-playbook <playbookname.yml> -i host-inventory

This will copy the file to the slave VM and execute it.

Enter your slave VM with vagrant up slave and vagrant ssh slave on another gitbash
You will see the copied .sh file 

![Screenshot 4](/copied%20to%20slave.png)

and watch the execution.

When done successfully, the cloned laravel website displays with the slave ip address in the host-inventory.

Here:
![Screenshot 5](/laravel%20site%20with%20node%20ip.png)
